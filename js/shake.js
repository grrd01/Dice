/*
* Author: Alex Gibson 
* https://github.com/alexgibson/shake.js 
* License: MIT license 
*/

!function(t,e){"function"==typeof define&&define.amd?define(function(){return e(t,t.document)}):"undefined"!=typeof module&&module.exports?module.exports=e(t,t.document):t.Shake=e(t,t.document)}("undefined"!=typeof window?window:this,function(o,i){"use strict";function t(t){if(this.hasDeviceMotion="ondevicemotion"in o,this.options={threshold:15,timeout:1e3},"object"==typeof t)for(var e in t)t.hasOwnProperty(e)&&(this.options[e]=t[e]);if(this.lastTime=new Date,this.lastX=null,this.lastY=null,this.lastZ=null,"function"==typeof i.CustomEvent)this.event=new i.CustomEvent("shake",{bubbles:!0,cancelable:!0});else{if("function"!=typeof i.createEvent)return!1;this.event=i.createEvent("Event"),this.event.initEvent("shake",!0,!0)}}return t.prototype.reset=function(){this.lastTime=new Date,this.lastX=null,this.lastY=null,this.lastZ=null},t.prototype.start=function(){this.reset(),this.hasDeviceMotion&&o.addEventListener("devicemotion",this,!1)},t.prototype.stop=function(){this.hasDeviceMotion&&o.removeEventListener("devicemotion",this,!1),this.reset()},t.prototype.devicemotion=function(t){var e,i,s,n=t.accelerationIncludingGravity;if(null===this.lastX&&null===this.lastY&&null===this.lastZ)return this.lastX=n.x,this.lastY=n.y,void(this.lastZ=n.z);e=Math.abs(this.lastX-n.x),i=Math.abs(this.lastY-n.y),s=Math.abs(this.lastZ-n.z),(e>this.options.threshold&&i>this.options.threshold||e>this.options.threshold&&s>this.options.threshold||i>this.options.threshold&&s>this.options.threshold)&&(new Date).getTime()-this.lastTime.getTime()>this.options.timeout&&(o.dispatchEvent(this.event),this.lastTime=new Date),this.lastX=n.x,this.lastY=n.y,this.lastZ=n.z},t.prototype.handleEvent=function(t){if("function"==typeof this[t.type])return this[t.type](t)},t});