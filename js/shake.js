/*
 * Author: Alex Gibson
 * https://github.com/alexgibson/shake.js
 * @license: MIT license
 */
!function(t,e){"function"==typeof define&&define.amd?define((function(){return e(t,t.document)})):"undefined"!=typeof module&&module.exports?module.exports=e(t,t.document):t.Shake=e(t,t.document)}("undefined"!=typeof window?window:this,(function(t,e){"use strict";function i(i){var s;if(this.hasDeviceMotion="ondevicemotion"in t,this.options={threshold:15,timeout:1e3},"object"==typeof i)for(s in i)i.hasOwnProperty(s)&&(this.options[s]=i[s]);if(this.lastTime=new Date,this.lastX=null,this.lastY=null,this.lastZ=null,"function"==typeof e.CustomEvent)this.event=new e.CustomEvent("shake",{bubbles:!0,cancelable:!0});else{if("function"!=typeof e.createEvent)return!1;this.event=e.createEvent("Event"),this.event.initEvent("shake",!0,!0)}}return i.prototype.reset=function(){this.lastTime=new Date,this.lastX=null,this.lastY=null,this.lastZ=null},i.prototype.start=function(){this.reset(),this.hasDeviceMotion&&("function"==typeof DeviceMotionEvent.requestPermission?DeviceMotionEvent.requestPermission().then(e=>{"granted"==e&&t.addEventListener("devicemotion",this,!1)}).catch(console.error):t.addEventListener("devicemotion",this,!1))},i.prototype.stop=function(){this.hasDeviceMotion&&t.removeEventListener("devicemotion",this,!1),this.reset()},i.prototype.devicemotion=function(e){var i,s,n,o=e.accelerationIncludingGravity;if(null===this.lastX&&null===this.lastY&&null===this.lastZ)return this.lastX=o.x,this.lastY=o.y,void(this.lastZ=o.z);i=Math.abs(this.lastX-o.x),s=Math.abs(this.lastY-o.y),n=Math.abs(this.lastZ-o.z),(i>this.options.threshold&&s>this.options.threshold||i>this.options.threshold&&n>this.options.threshold||s>this.options.threshold&&n>this.options.threshold)&&(new Date).getTime()-this.lastTime.getTime()>this.options.timeout&&(t.dispatchEvent(this.event),this.lastTime=new Date),this.lastX=o.x,this.lastY=o.y,this.lastZ=o.z},i.prototype.handleEvent=function(t){if("function"==typeof this[t.type])return this[t.type](t)},i}));